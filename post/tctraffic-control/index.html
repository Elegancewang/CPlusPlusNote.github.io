<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
<title>
    Renzo&#39;s Blog
</title>
<!--[if lt IE 9]><script src="//cdn.bootcss.com/html5shiv/r29/html5.js"></script><![endif]-->
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
<meta http-equiv="x-dns-prefetch-control" content="on">
<link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
<meta name="author" content="Renzo">
<meta name="description" content="前路漫漫">
<meta name="keywords" content="KTBFFH, Dota2">
<script async src="//instant.page/3.0.0" type="module" defer integrity="sha384-OeDn4XE77tdHo8pGtE1apMPmAipjoxUQ++eeJa6EtJCfHlvijigWiJpD7VDPWXV1"></script>
<link rel="stylesheet" href="https://elegancewang.github.io/CPlusPlusNote.github.io/styles/main.css" />
<link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
<script type="text/javascript" src="https://apps.bdimg.com/libs/jquery/1.7.1/jquery.min.js"></script>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/itjoker233/Gridea-theme-Chic/assets/media/css/style.min.css" />
    <script src="https://cdn.jsdelivr.net/gh/itjoker233/Gridea-theme-Chic/assets/media/script/tocbot.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/itjoker233/Gridea-theme-Chic/assets/media/script/script.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/itjoker233/Gridea-theme-Chic/assets/media/script/icon.min.js"></script>
    
            <script src="https://cdn.jsdelivr.net/gh/ITJoker233/ITJoker233.github.io@1.0.12/CDN/js/Card/prism.min.js"></script>
            <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/ITJoker233/ITJoker233.github.io@1.0.12/CDN/css/Card/prism.min.css" />
            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.1/dist/katex.min.css">
            <script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.1/dist/katex.min.js"></script>
            
                <!--点击特效-->
                <script src="https://cdn.jsdelivr.net/gh/ITJoker233/ITJoker233.github.io@latest/CDN/js/love.min.js"></script>
                
                    <script src="https://cdn.jsdelivr.net/gh/itjoker233/Gridea-theme-Chic@latest/assets/media/script/APlayer.min.js"></script>
                    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css">
                    
                        <!--CDN样式-->
                        <script src="https://cdn.jsdelivr.net/gh/ITJoker233/ITJoker233.github.io@latest/CDN/js/hit-kounter-lc-0.3.0.js"></script>
                        <script src="https://cdn1.lncld.net/static/js/av-min-1.5.0.js"></script>
                        
                            <script>
                                (function() {
                                    var bp = document.createElement('script');
                                    var curProtocol = window.location.protocol.split(':')[0];
                                    if (curProtocol === 'https') {
                                        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
                                    } else {
                                        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
                                    }
                                    var s = document.getElementsByTagName("script")[0];
                                    s.parentNode.insertBefore(bp, s);
                                })();
                            </script>
                            
</head>

<body>
    <div class="wrapper">
        <header>
    <nav class="navbar">
        <div class="container">
            <div class="navbar-header header-logo">
                <a href="https://elegancewang.github.io/CPlusPlusNote.github.io">
                    Renzo&#39;s Blog
                </a>
            </div>

            <div class="menu navbar-right">
                
                    <a class="menu-item" href="https://elegancewang.github.io/CPlusPlusNote.github.io">
                        首页
                    </a>
                    
                    <a class="menu-item" href="https://elegancewang.github.io/CPlusPlusNote.github.io/archives">
                        归档
                    </a>
                    
                    <a class="menu-item" href="https://elegancewang.github.io/CPlusPlusNote.github.io/tags">
                        标签
                    </a>
                    
                    <a class="menu-item" href="https://elegancewang.github.io/CPlusPlusNote.github.io/post/about">
                        关于
                    </a>
                    
                    <a class="menu-item" href="https://elegancewang.github.io/CPlusPlusNote.github.io/post/tu-jie-mi-ma-ji-zhu-ri-jie-cheng-hao-zong-jie">
                        Cryptography, Information Security and Privacy
                    </a>
                    
                        <input id="switch_default" type="checkbox" class="switch_default">
                        <label for="switch_default" class="toggleBtn"></label>
            </div>
            <form id="gridea-search-form" data-update="1604945447035" action="/search/index.html">
                <input class="search-input" autocomplete="off" spellcheck="false" name="q" autofocus="true" placeholder="Search...">
            </form>
        </div>
    </nav>

    
        <nav class="navbar-mobile" id="nav-mobile">
            <div class="container">
                <div class="navbar-header">
                    <div>
                        <a href="https://elegancewang.github.io/CPlusPlusNote.github.io">
                            Renzo&#39;s Blog
                        </a>
                        <!--en-->
                        <a id="mobile-toggle-theme-en" class="a en">&nbsp;Dark</a>
                        <!--zh-->
                        <a id="mobile-toggle-theme-zh" class="a zh">&nbsp;&#x6697;&#x9ED1;</a>
                    </div>
                    <form id="gridea-search-form" data-update="1604945447035" action="/search/index.html">
                        <input class="search-input" autocomplete="off" spellcheck="false" name="q" autofocus="true" placeholder="Search...">
                    </form>
                    <!--en-->
                    <div class="menu-toggle" id="menu-toggle-en" onclick="mobileBtn()">&#9776; Menu</div>
                    <!--zh-->
                    <div class="menu-toggle" id="menu-toggle-zh" onclick="mobileBtn()">&#9776; &#x83DC;&#x5355;</div>

                </div>
                <div class="menu" id="mobile-menu">
                    
                        <a class="menu-item" href="https://elegancewang.github.io/CPlusPlusNote.github.io">
                            首页
                        </a>
                        
                        <a class="menu-item" href="https://elegancewang.github.io/CPlusPlusNote.github.io/archives">
                            归档
                        </a>
                        
                        <a class="menu-item" href="https://elegancewang.github.io/CPlusPlusNote.github.io/tags">
                            标签
                        </a>
                        
                        <a class="menu-item" href="https://elegancewang.github.io/CPlusPlusNote.github.io/post/about">
                            关于
                        </a>
                        
                        <a class="menu-item" href="https://elegancewang.github.io/CPlusPlusNote.github.io/post/tu-jie-mi-ma-ji-zhu-ri-jie-cheng-hao-zong-jie">
                            Cryptography, Information Security and Privacy
                        </a>
                        
                </div>
            </div>
        </nav>
</header>
<script>
    var mobileBtn = function f() {
        var toggleMenu = document.getElementById("menu-toggle-en");
        var toggleMenu_zh = document.getElementById("menu-toggle-zh");

        var mobileMenu = document.getElementById("mobile-menu");
        if (toggleMenu.display != "none") {
            if (toggleMenu.classList.contains("active")) {
                toggleMenu.classList.remove("active")
                mobileMenu.classList.remove("active")
            } else {
                toggleMenu.classList.add("active")
                mobileMenu.classList.add("active")
            }
        } else if (toggleMenu_zh.display != "none") {
            if (toggleMenu_zh.classList.contains("active")) {
                toggleMenu_zh.classList.remove("active")
                mobileMenu.classList.remove("active")
            } else {
                toggleMenu_zh.classList.add("active")
                mobileMenu.classList.add("active")
            }
        }

    }
</script>
            <div class="main">
                <div class="container">
                    <article class="post-wrap">
                        <header class="post-header">
                            <h1 class="post-title">
                                TC(Traffic Control)
                            </h1>
                            
                                    <!--zh-->
                                    <div class="post-meta zh">
                                        &#x4F5C;&#x8005;:
                                        <a itemprop="author" rel="author" href="/">
                                            Renzo's Blog
                                        </a>
                                        <span class="post-time">&#x65E5;&#x671F;: <a href="#">10-27-2020</a></span>
                                        <span class="post-readtime">&#x9605;&#x8BFB;&#x65F6;&#x95F4;:<a
                                    href="#">7.5
                                    &#x5206;&#x949F;</a></span>
                                        <span class="post-words">&#x5B57;&#x6570;:<a href="#">1868</a></span>
                                        
                                                阅读量:
                                                <span data-hk-page="current"> - </span>
                                                
                                    </div>
                                    
                        </header>
                        
                        <div class="post-content">
                            <p>Linux中的流量控制</p>
<!-- more -->
<h1 id="1-tc原理">1. TC原理</h1>
<p>Linux操作系统中的流量控制器TC（Traffic Control）用于Linux内核的流量控制，主要是通过在输出端口处建立一个队列来实现流量控制。<br>
接收包从输入接口进来后，经过流量限制丢弃不符合规定的数据包，由输入多路分配器进行判断选择：</p>
<ul>
<li>如果接收包的目的主机是本主机，那么将该包送给上层处理，否则需要进行转发，将接收包交到转发块（Forwarding Block）处理。</li>
<li>转发块同时也接收本主机上层(TCP、UDP等)产生的包，通过查看路由表，决定所处理包的下一跳。</li>
<li>然后，对包进行排列以便将它们送到输出接口。</li>
</ul>
<p>一般只能限制网卡发送的数据包，不能限制网卡接收的数据包，所以可以通过改变发送次序来控制传输速率。Linux流量控制主要是在输出接口排列时进行处理和实现的。</p>
<h1 id="2-规则">2. 规则</h1>
<h2 id="21-队列queues-和排队规则queueing-disciplines">2.1 队列（Queues） 和排队规则（Queueing Disciplines）</h2>
<p>通过对包进行<strong>排队</strong>（queuing），我们可以决定数据的<strong>发送方式</strong>（the way in which data is SENT）。但理解下面这一点非常重要：我们<strong>只能对发送</strong>（transmit）<strong>的数据进行整形</strong>（shape the data）。</p>
<p><strong>互联网的工作机制</strong>决定了<strong>接收端无法直接控制发送端的行为</strong>。这就像你家的 （实体！）邮箱一样：除非能联系到所有人（告诉他们未经同意不要寄信给你），否则 你无法控制别人寄多少东西过来。😉</p>
<p>但与实际生活不同的是，互联网基于 TCP/IP 协议栈，这多少会带来一些帮助。TCP/IP 无法提前知道两台主机之间的网络带宽，因此开始时它会以越来越快的速度发送数据（慢启 动），直到开始出现丢包，这时它知道已经没有可用空间来存储这些待发送的包了，因此就会 降低发送速度。TCP/IP 的实际工作过程比这个更智能一点，我们后面会再讨论。</p>
<p>这就好比你留下一半的信件在实体邮箱里不取，期望别人知道这个状况后会停止给你寄新的信件。 但不幸的是，<strong>这种方式只对互联网管用，对你的实体邮箱无效</strong> 😃</p>
<p>如果内网有一台路由器，你希望限制某几台主机的下载速度，那你应该找到发送数据到 这些主机的路由器内部接口（inner interface of your router），然后在这些 <strong>路由器内部接口</strong>上做 <strong>整流</strong>（traffic shaping，流量整形）。</p>
<p>此外，还要确保<strong>链路瓶颈</strong>（bottleneck of the link）也在你的控制范围内。例如，如果网 卡是 100Mbps，但路由器的链路带宽是 256Kbps，那首先应该<strong>确保不要发送过多数据给路由器</strong>，因为它可能扛不住。<strong>否则，链路控制和带宽整形的决定权就不在主机侧而到路由器侧了</strong>。要达到限速目的，我们需要对“<strong>发送队列</strong>”有完全的把控（”own the queue”），这里的“发送队列”也就是<strong>整条链路上最慢的一段</strong>（slowest link in the chain）。 幸运的是，大多数情况下这个条件都是能满足的。</p>
<h2 id="22-simple-classless-qdisc简单-不分类排队规则">2.2 Simple， classless qdisc（简单、不分类排队规则）</h2>
<p>如前所述，<strong>排队规则</strong>（queueing disciplines）改变了数据的发送方式。</p>
<p><strong>不分类（或称无类别）排队规则</strong>（classless queueing disciplines）可以对某个网络 接口（interface）上的所有流量进行<strong>无差别整形</strong>。包括对数据进行：</p>
<ul>
<li>重新调度（reschedule）</li>
<li>增加延迟（delay）</li>
<li>丢弃（drop）</li>
</ul>
<p>与 classless qdisc 对应的是 classful qdisc，即<strong>有类别（或称分类别）排队规则</strong>，后者是一个<strong>排队规则中又包含其他排队规则</strong>（qdisc-containing-qdiscs）！😮 先理解了 classless qdisc，才能理解 classful qdisc。<br>
目前最常用的 classless qdisc 是 <code>pfifo_fast qdisc</code>，这也是默认排队规则。 这也解释了为什么这些高级功能如此健壮：本质上来说，它们只不过是“另一个队列”而 已（nothing more than ‘just another queue’）。<br>
每种队列都有自己的优缺点。其中一些可能测试的并不全面。</p>
<h2 id="22-pfifo_fast先入先出队列">2.2 pfifo_fast（先入先出队列）</h2>
<p>如名字所示，这是一个先入先出队列（First In, First Out），因此对所有包都一视同仁。</p>
<p>pfifo_fast 有<strong>三个所谓的 “band”</strong>（可理解为三个队列），编号分别为 0、1、2：</p>
<ul>
<li><strong>每个 band 上分别执行 FIFO 规则</strong>。</li>
<li><strong>如果 band 0 有数据，就不会处理 band 1</strong>；同理，band 1 有数据时， 不会去处理 band 2。</li>
<li>内核会检查<strong>数据包的 TOS 字段</strong>，将**“最小延迟”的包放到 band 0**。</li>
</ul>
<p>不要将 <code>pfifo_fast qdisc</code> 与后面介绍的 <code>PRIO qdisc</code> 混淆，后者是 classful 的！ 虽然二者行为类似，但 <strong><code>pfifo_fast</code> 是无类别</strong>的，这意味你<strong>无法通过 <code>tc</code> 命令向 <code>pfifo_fast</code> 内添加另一个 qdisc。</strong></p>
<h3 id="221-参数与用法">2.2.1 参数与用法</h3>
<p><code>pfifo_fast qdisc</code> 默认配置是写死的（the hardwired default），因此<strong>无法更改</strong>。</p>
<p>下面介绍这份写死的配置是什么样的。</p>
<ul>
<li><strong><code>priomap</code></strong><br>
<code>priomap</code> 决定了<strong>如何将内核设置的 packet priority 映射到 band</strong>。priority 位于包的 TOS 字段：</li>
</ul>
<pre><code>     0     1     2     3     4     5     6     7
  +-----+-----+-----+-----+-----+-----+-----+-----+
  |                 |                       |     |
  |   PRECEDENCE    |          TOS          | MBZ |
  |                 |                       |     |
  +-----+-----+-----+-----+-----+-----+-----+-----+s
</code></pre>
<p>TOS 字段占用 4 个比特，各 bit 含义如下：</p>
<pre><code>  Binary Decimcal  Meaning
  -----------------------------------------
  1000   8         Minimize delay (md)
  0100   4         Maximize throughput (mt)
  0010   2         Maximize reliability (mr)
  0001   1         Minimize monetary cost (mmc)
  0000   0         Normal Service
</code></pre>
<p><code>tcpdump -vv</code> 会打印包的 TOS 字段，其中的 TOS 值对应下面的第一列：</p>
<pre><code class="language-sql">  TOS     Bits  Means                    Linux Priority    Band
  ------------------------------------------------------------
  0x0     0     Normal Service           0 Best Effort     1
  0x2     1     Minimize Monetary Cost   1 Filler          2
  0x4     2     Maximize Reliability     0 Best Effort     1
  0x6     3     mmc+mr                   0 Best Effort     1
  0x8     4     Maximize Throughput      2 Bulk            2
  0xa     5     mmc+mt                   2 Bulk            2
  0xc     6     mr+mt                    2 Bulk            2
  0xe     7     mmc+mr+mt                2 Bulk            2
  0x10    8     Minimize Delay           6 Interactive     0
  0x12    9     mmc+md                   6 Interactive     0
  0x14    10    mr+md                    6 Interactive     0
  0x16    11    mmc+mr+md                6 Interactive     0
  0x18    12    mt+md                    4 Int. Bulk       1
  0x1a    13    mmc+mt+md                4 Int. Bulk       1
  0x1c    14    mr+mt+md                 4 Int. Bulk       1
  0x1e    15    mmc+mr+mt+md             4 Int. Bulk       1
</code></pre>
<p>第二列是对应的十进制表示，第三列是对应的含义。例如，<code>15</code> 表示这个包期望 <code>Minimal Monetary Cost</code> + <code>Maximum Reliability</code> + <code>Maximum Throughput</code> + <code>Minimum Delay</code>。我把这样的包称为“荷兰包”（a ‘Dutch Packet’。荷兰人比较 节俭/抠门，译注）。<strong>第四列是对应到 Linux 内核的优先级；最后一列是 映射到的 band</strong>，从命令行输出看，形式为：</p>
<pre><code>  1, 2, 2, 2, 1, 2, 0, 0 , 1, 1, 1, 1, 1, 1, 1, 1
</code></pre>
<p>例如，priority 4 会映射到 band 1。priomap 还能列出 priority &gt; 7 的那些 不是由 TOS 映射、而是由其他方式设置的优先级。例如，下表列出了<strong>应用（application）是如何设置它们的 TOS 字段</strong>的，来自 RFC 1349（更多信息可<a href="https://tools.ietf.org/html/rfc1349">阅读全文</a>)</p>
<pre><code>  TELNET                   1000           (minimize delay)
  FTP     Control          1000           (minimize delay)
          Data             0100           (maximize throughput)
    
  TFTP                     1000           (minimize delay)
    
  SMTP    Command phase    1000           (minimize delay)
          DATA phase       0100           (maximize throughput)
    
  DNS     UDP Query        1000           (minimize delay)
          TCP Query        0000
          Zone Transfer    0100           (maximize throughput)
    
  NNTP                     0001           (minimize monetary cost)
    
  ICMP    Errors           0000
          Requests         0000 (mostly)
          Responses        &lt;same as request&gt; (mostly)
</code></pre>
<ul>
<li><code>txqueuelen</code><br>
发送队列长度，是一个网络接口（interface）参数，可以用 <code>ifconfig</code> 命令设置。例 如，<code>ifconfig eth0 txqueuelen 10</code>。<br>
<code>tc</code> 命令无法修改这个值。
<h2 id="23-tbftoken-bucket-filter令牌桶过滤器">2.3 TBF（Token Bucket Filter，令牌桶过滤器）</h2>
</li>
</ul>

                        </div>
                        
                            <div class="post-toc">
                                <ul class="markdownIt-TOC">
<li><a href="#1-tc%E5%8E%9F%E7%90%86">1. TC原理</a></li>
<li><a href="#2-%E8%A7%84%E5%88%99">2. 规则</a>
<ul>
<li><a href="#21-%E9%98%9F%E5%88%97queues-%E5%92%8C%E6%8E%92%E9%98%9F%E8%A7%84%E5%88%99queueing-disciplines">2.1 队列（Queues） 和排队规则（Queueing Disciplines）</a></li>
<li><a href="#22-simple-classless-qdisc%E7%AE%80%E5%8D%95-%E4%B8%8D%E5%88%86%E7%B1%BB%E6%8E%92%E9%98%9F%E8%A7%84%E5%88%99">2.2 Simple， classless qdisc（简单、不分类排队规则）</a></li>
<li><a href="#22-pfifo_fast%E5%85%88%E5%85%A5%E5%85%88%E5%87%BA%E9%98%9F%E5%88%97">2.2 pfifo_fast（先入先出队列）</a>
<ul>
<li><a href="#221-%E5%8F%82%E6%95%B0%E4%B8%8E%E7%94%A8%E6%B3%95">2.2.1 参数与用法</a></li>
</ul>
</li>
<li><a href="#23-tbftoken-bucket-filter%E4%BB%A4%E7%89%8C%E6%A1%B6%E8%BF%87%E6%BB%A4%E5%99%A8">2.3 TBF（Token Bucket Filter，令牌桶过滤器）</a></li>
</ul>
</li>
</ul>

                            </div>
                            
                                
                                    
                                            <!--zh-->
                                            <section class="post-copyright zh">
                                                <p class="copyright-item ">
                                                    <span>&#x4F5C;&#x8005;:</span>
                                                    <span>Renzo's Blog</span>
                                                </p>

                                                <p class="copyright-item">
                                                    <span>&#x6C38;&#x4E45;&#x94FE;&#x63A5;:</span>
                                                    <span><a href="https://elegancewang.github.io/CPlusPlusNote.github.io/post/tctraffic-control/">https://elegancewang.github.io/CPlusPlusNote.github.io/post/tctraffic-control/</a></span>
                                                </p>

                                                <p class="copyright-item">
                                                    <span>&#x534F;&#x8BAE;:</span>
                                                    <span>MIT License</span>
                                                </p>
                                            </section>
                                            
                                                
                                                    
                                                                    <!--Share-->
                                                                    <span style="margin-right:15px">
                        <i class="post-share"></i>
                        <span>&#x5206;&#x4EAB;:</span>
                                                                    <a title="QR 码" target="_blank" href="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=https://elegancewang.github.io/CPlusPlusNote.github.io/post/tctraffic-control/"><i class="fa fa-qrcode"></i></a>
                                                                    <a title="QQ" target="_blank" href="https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=https://elegancewang.github.io/CPlusPlusNote.github.io/post/tctraffic-control/&sharesource=qzone&title=TC(Traffic Control)&pics=https://elegancewang.github.io/CPlusPlusNote.github.io/images/avatar.png?v=1604945447035&summary=&lt;p&gt;Linux中的流量控制&lt;/p&gt;
"><i class="fa fa-qq"></i></a>
                                                                    <a title="新浪微博" target="_blank" href="https://service.weibo.com/share/share.php?url=https://elegancewang.github.io/CPlusPlusNote.github.io/post/tctraffic-control/&sharesource=weibo&title=TC(Traffic Control) + " - " + &lt;p&gt;Linux中的流量控制&lt;/p&gt;
&pic="https://elegancewang.github.io/CPlusPlusNote.github.io/images/avatar.png?v=1604945447035 "><i class="fa fa-weibo "></i></a>

                                                                    </span>
                                                                    
                                                                        <div class="reward ">
                                                                            <div class="reward-button ">&yen;
                                                                                <span class="reward-code "> 
                        <span class="alipay-code "> <img class="alipay-img " alt = "support " src="https://blog.itjoker.cn/alipay.jpg"><b>支付宝</b> </span>
                                                                                <span class="wechat-code "> <img alt ="support " class="wechat-img " src="https://blog.itjoker.cn/wechat.jpg"><b>微信</b> </span> </span>
                                                                            </div>
                                                                        </div>
                                                                        
                                                                            <!--zh-->
                                                                            <section class="post-tags zh ">
                                                                                <div>
                                                                                    <span>&#x6807;&#x7B7E;:</span>
                                                                                    <span class="tag ">
                        
                                </span>
                                                                                </div>
                                                                                <div>
                                                                                    <a href="javascript:window.history.back();">
                        &#x8FD4;&#x56DE;</a>
                                                                                    <span>&dot;</span>
                                                                                    <a href="#">&#x4E3B;&#x9875;</a>
                                                                                </div>
                                                                            </section>

                                                                            
                                                                                <!---->
                                                                                <section class="post-nav">
                                                                                    
                                                                                        <a class="prev" rel="prev" href="https://elegancewang.github.io/CPlusPlusNote.github.io/post/linux-tian-jia-wang-qia/">
                                                                                            Linux添加网卡
                                                                                        </a>
                                                                                        
                                                                                            
                                                                                                <a class="next" rel="next" href="https://elegancewang.github.io/CPlusPlusNote.github.io/post/webrtc-huan-jing-pei-zhi/">
                                                                                                    WebRTC 环境配置（Windows 平台）
                                                                                                </a>
                                                                                                
                                                                                </section>
                    </article>
                </div>
                
                                            
            </div>
    </div>
    </div>
    </div>
    
    <div id="player"></div>
    
        <footer id="footer" class="footer">
            <div class="copyright">
                
                        Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a>
                            
                                <b id="hitokoto"></b><br>
                                
                                        <svg viewBox="0 0 1024 1024" style="margin-left: 5px;margin-right: 5px;" version="1.0" width="8" height="8" class="my-face">
            <path
                d="M863.597631 513.574282l-271.33965-140.213484L729.783667 81.926656c3.583731-7.87141 7.167462-15.742819 7.167462-25.214109C736.887134 25.226908 708.345275 0.012799 672.635953 0.012799a63.611229 63.611229 0 0 0-39.293053 12.607055c-1.791866 1.59988-3.519736 3.19976-5.311602 3.19976L147.87531 418.925381a55.547834 55.547834 0 0 0-19.646527 47.356448c1.791866 17.278704 14.27093 33.021523 32.125591 42.492813l271.33965 141.749369L292.504463 945.221908c-12.479064 25.214109-1.791866 53.563983 23.166262 69.306802 10.751194 6.335525 23.230258 9.47129 35.709322 9.47129 16.062795 0 32.125591-4.735645 44.604655-15.742819l480.091993-403.297753a55.547834 55.547834 0 0 0 19.646526-47.228458 61.243407 61.243407 0 0 0-32.12559-44.156688z"
                fill="#93b5cf"></path>
        </svg>
                                        Renzo&#39;s Blog &copy;Copyright
                                            <script>
                                                var date = new Date();
                                                document.write("" + date.getFullYear());
                                            </script>
                                            | Powered by
                                            <a href="https://coding.net" target="_blank">
                                                Github
                                            </a>
            </div>
            <div id="update" style="display:none;">
                on
            </div>
            
                <div id="version" style="display:none;">
                    1.7.5
                </div>
                
                    <script>
                        var pat = '';
                        
                        document.write('<div id="home_path" style="display:none;">' + document.location.protocol + '//' + window.document.location.hostname + pat + '</div>')
                    </script>
        </footer>
        
                <script>
                    

                    function LoadPlayer() {
                        var music_array = [];
                        
                        music_array.push({
                            name: '',
                            url: '',
                            artist: '',
                            cover: '',
                        });
                        
                        console.log(" MusicList: " + music_array);
                        
                        const ap = new APlayer({
                            container: document.getElementById('player'),
                            fixed: true,
                            audio: music_array
                        });
                        
                    }
                    LoadPlayer();
                    
                    
                    
                    hitokoto();
                    
                    getStar();
                    hljs.initHighlighting();
                    console.clear();
                    
                    CheckVersion();
                    
                    var newDate = new Date();
                    newDate.setTime(1604945447035);
                    console.log(" Blog Update Time: " + newDate.toLocaleDateString());
                    console.log("\n %c \u26a1Theme:Chic Author's Blog:https://blog.itjoker.cn  Write By ITJoker  \n\n", "color: #ffffff; background: rgba(49, 49, 49, 0.85); padding:5px 0;border-radius:5px;");
                </script>
                
                    <div id="tp-weather-widget" style="background: #666;display: flex;"></div>
                    <script>
                        (function(T, h, i, n, k, P, a, g, e) {
                            g = function() {
                                P = h.createElement(i);
                                a = h.getElementsByTagName(i)[0];
                                P.src = k;
                                P.charset = "utf-8";
                                P.async = 1;
                                a.parentNode.insertBefore(P, a)
                            };
                            T["ThinkPageWeatherWidgetObject"] = n;
                            T[n] || (T[n] = function() {
                                (T[n].q = T[n].q || []).push(arguments)
                            });
                            T[n].l = +new Date();
                            if (T.attachEvent) {
                                T.attachEvent("onload", g)
                            } else {
                                T.addEventListener("load", g, false)
                            }
                        }(window, document, "script", "tpwidget", "//widget.seniverse.com/widget/chameleon.js"))
                    </script>
                    <script>
                        var wearther_margin = "10px 10px";
                        
                        wearther_margin = "70px 5px";
                        
                        tpwidget("init", {
                            "flavor": "bubble",
                            "location": "WX4FBXXFKE4F",
                            "geolocation": "enabled",
                            "position": "bottom-left",
                            "margin": wearther_margin,
                            "language": "zh-chs",
                            "unit": "c",
                            "theme": "chameleon",
                            "uid": "UFC977E1C7",
                            "hash": "213ad798bc472dc365da3a9d4a9ff115"
                        });
                        tpwidget("show");
                    </script>
                    
        </div>
</body>
<script>
    scroll();
</script>

</html>